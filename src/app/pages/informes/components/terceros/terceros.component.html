<div class="relative">
  @if (!readonly) {
  <div class="w-10 h-10 bg-red-600 rounded-full absolute top-3 right-3 z-20 shadow-md shadow-black/75
      flex justify-center items-center" pRipple (click)="onDelete()">
    <ng-icon name="heroTrashSolid" size="1.2rem" color="white" />
  </div>
  }
  <p-accordion id="terceros">
    <p-accordionTab>
      <ng-template pTemplate="header">
        <div class="relative">
          <p>{{nombre ? nombre : 'Completar los campos'}}</p>
        </div>
      </ng-template>
      <div class="grid grid-cols-12 border-solid">
        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Nombre y apellido</label>
          <input pInputText id="nombre" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese nombre y apellido"
            [(ngModel)]="nombre" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Domicilio</label>
          <input pInputText id="dni" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese domicilio"
            [(ngModel)]="domicilio" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Teléfono</label>
          <input pInputText id="teléfono" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese teléfono" [(ngModel)]="tel"
            [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Correo electrónico</label>
          <input pInputText id="teléfono" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese correo electrónico"
            [(ngModel)]="email" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Vehículo</label>
          <input pInputText id="vehículo" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese vehículo" [(ngModel)]="veh"
            [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Aseguradora</label>
          <input pInputText id="aseguradora" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese aseguradora"
            [(ngModel)]="aseguradora" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Patente</label>
          <input pInputText id="patente" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese patente"
            [(ngModel)]="patente" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Año</label>
          <input pInputText id="anio" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese el año del vehículo"
            [(ngModel)]="anio" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Póliza</label>
          <input pInputText id="poliza" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese póliza"
            [(ngModel)]="poliza" [readonly]="readonly">
        </div>

        <div class="lg:col-span-4 sm:col-span-12 md:col-span-6 col-span-12 px-2 flex flex-col">
          <label class="text-sm font-medium text-gray-700 w-full">Cobertura</label>
          <input pInputText id="cobertura" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese patente"
            [(ngModel)]="cobertura" [readonly]="readonly">
        </div>

        <div class="lg:col-span-12 px-2 flex flex-col">
          <div class="grid grid-cols-12 border-solid">
            <div class="col-span-6 px-2 flex flex-col">
              <div class="flex items-center my-2 ml-2">
                <p-checkbox [(ngModel)]="hasAmpDenuncia" [binary]="true"
                  (ngModelChange)="setList(documents, 'documents'); retDenuncia = false; tipoAmpDenuncia = 'Ampliación de denuncia'" />
                <label class="ml-2">¿Cuenta con ampliación de denuncia?</label>
              </div>
            </div>
            <div class="col-span-6 px-2 flex flex-col">
              <div class="flex items-center my-2 ml-2">
                <p-checkbox [(ngModel)]="retDenuncia" [binary]="true" [disabled]="!hasAmpDenuncia" (ngModelChange)="retDenuncia ? tipoAmpDenuncia = 'Retiro de denuncia' :
                      tipoAmpDenuncia = 'Ampliación de denuncia'; setList(documents, 'documents');" />
                <label class="ml-2">¿Es retiro de denuncia?</label>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="w-full hide" [ngClass]="{ 'show': !hasAmpDenuncia }">
        <div>
          <h1 class="p-4 rounded-md text-start text-sm bg-orange-400">Al desmarcar esta
            casilla, no podrá cargar la imagen correspondiente a la ampliación de denuncia. Si alguna se encontraba
            cargada, sera borrada (la última de la lista).</h1>
        </div>
      </div>
      <div class="col-span-12 px-2 flex flex-col">
        <label class="text-sm font-medium text-gray-700 w-full">Ampliación de denuncia</label>
        <textarea pInputTextarea id="amp_denuncia" type="text" class="mt-1 p-3 w-full border border-gray-300
                rounded-md focus:outline-none focus:border-indigo-500" placeholder="Ingrese ampliación de denuncia"
          [(ngModel)]="amp_denuncia" [readonly]="readonly" [disabled]="!hasAmpDenuncia"></textarea>
      </div>
      <hr class="my-10">
      <app-attachments [helpText]="'Agregue aquí: Ampliación de denuncia y documentación del asegurado.'"
        [images]="documents" (hasChange)="setList(documents, $event)" [type]="'documents'" [readonly]="true" />

      <hr class="my-10">
      <app-attachments [helpText]="'Agregue aquí: fotografías del vehículo.'" [title]="'Imágenes del vehículo'"
        [images]="car" (hasChange)="setList(car, $event)" [type]="'asegurado-auto'" [readonly]="true" />
    </p-accordionTab>
  </p-accordion>

</div>

<app-dialog #dialog />